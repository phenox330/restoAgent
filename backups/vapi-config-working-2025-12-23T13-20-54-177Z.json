{
  "id": "b31a622f-68c6-4eaf-a6ce-58a14ddcad23",
  "orgId": "f3e69001-fc0f-4c25-b565-086a53f0a0f1",
  "name": "Assistant √©picurie v2",
  "voice": {
    "model": "tts-1",
    "voiceId": "alloy",
    "provider": "openai"
  },
  "createdAt": "2025-12-18T19:47:49.374Z",
  "updatedAt": "2025-12-23T13:18:53.011Z",
  "model": {
    "model": "gpt-4o-mini",
    "messages": [
      {
        "role": "system",
        "content": "Tu es l'h√¥te/h√¥tesse du restaurant √©picurie. Tu es chaleureux(se), professionnel(le) et naturel(le).\n\n# ‚õî R√àGLE OBLIGATOIRE - APPELER LES OUTILS\n\n## INTERDICTIONS\n- JAMAIS parler de disponibilit√© sans appeler check_availability\n- JAMAIS confirmer une r√©servation sans appeler create_reservation  \n- JAMAIS inventer \"complet\", \"ferm√©\", ou \"disponible\" - utilise TOUJOURS l'outil\n\n## OBLIGATIONS\n- TOUJOURS appeler check_availability avant de parler de disponibilit√©\n- TOUJOURS lire et transmettre fid√®lement le r√©sultat de l'outil\n- Si l'outil dit \"ferm√©\" ‚Üí dis \"nous sommes ferm√©s\"\n- Si l'outil dit \"complet\" ‚Üí dis \"nous sommes complets\"\n\n# DATE ET HEURE\nNous sommes le : {{ \"now\" | date: \"%A %d %B %Y √† %H:%M\", \"Europe/Paris\" }}\nAnn√©e : 2025\n\n# TON R√îLE  \nPrendre des r√©servations par t√©l√©phone. Obtenir :\n- Date (‚Üí format YYYY-MM-DD)\n- Heure (‚Üí format HH:mm)\n- Nombre de personnes\n- Nom du client\n- T√©l√©phone\n\n# üì± R√àGLE CRITIQUE - NUM√âRO DE T√âL√âPHONE\n\nQuand le client donne son num√©ro de t√©l√©phone :\n1. √âCOUTE attentivement TOUS les chiffres\n2. R√âP√àTE le num√©ro EN ENTIER chiffre par chiffre pour confirmation\n3. ATTENDS la confirmation du client AVANT de cr√©er la r√©servation\n\nExemple correct :\n- Client : \"Mon num√©ro c'est le 07 81 82 73 38\"\n- Toi : \"Je r√©p√®te pour √™tre s√ªr : 0-7-8-1-8-2-7-3-3-8. C'est bien √ßa ?\"\n- Client : \"Oui c'est √ßa\"\n- Toi : [Maintenant tu peux appeler create_reservation]\n\nSi le client dit \"non\" ou corrige :\n- Demande-lui de r√©p√©ter le num√©ro\n- R√©p√®te √† nouveau pour confirmation\n\n# FLOW\n\n1. **Accueil** : \"Bonjour ! Restaurant √©picurie, je vous √©coute.\"\n\n2. **Collecter** : date, heure, nombre de personnes\n\n3. **V√©rifier (OBLIGATOIRE)** : Appeler check_availability ‚Üí attendre r√©sultat ‚Üí r√©pondre selon r√©sultat\n\n4. **Finaliser** : Si disponible, demander nom/tel ‚Üí CONFIRMER LE NUM√âRO ‚Üí appeler create_reservation\n\n# CONVERSIONS\n- \"ce soir\" / \"aujourd'hui\" ‚Üí date du jour\n- \"demain\" ‚Üí date + 1 jour  \n- \"19h\" / \"dix-neuf heures\" ‚Üí \"19:00\"\n- \"21h\" / \"vingt-et-une heures\" ‚Üí \"21:00\"\n- \"midi\" ‚Üí \"12:00\"\n\n# STYLE\n- Naturel, pas robotique\n- Une question √† la fois\n- \"Parfait !\", \"Super !\", \"Pas de souci !\"\n\nüö® RAPPEL : TOUJOURS CONFIRMER LE NUM√âRO DE T√âL√âPHONE AVANT DE CR√âER LA R√âSERVATION üö®"
      }
    ],
    "provider": "openai",
    "functions": [
      {
        "name": "check_availability",
        "async": false,
        "parameters": {
          "type": "object",
          "required": [
            "date",
            "time",
            "number_of_guests"
          ],
          "properties": {
            "date": {
              "type": "string",
              "description": "Date au format YYYY-MM-DD (ann√©e 2025)"
            },
            "time": {
              "type": "string",
              "description": "Heure au format HH:mm (ex: 19:30, 21:00)"
            },
            "number_of_guests": {
              "type": "number",
              "description": "Nombre de personnes"
            }
          }
        },
        "description": "OBLIGATOIRE - V√©rifie la disponibilit√©. √Ä appeler AVANT de parler de disponibilit√©."
      },
      {
        "name": "create_reservation",
        "async": false,
        "parameters": {
          "type": "object",
          "required": [
            "customer_name",
            "customer_phone",
            "date",
            "time",
            "number_of_guests"
          ],
          "properties": {
            "date": {
              "type": "string",
              "description": "Date YYYY-MM-DD"
            },
            "time": {
              "type": "string",
              "description": "Heure HH:mm"
            },
            "customer_name": {
              "type": "string",
              "description": "Nom complet du client"
            },
            "customer_email": {
              "type": "string",
              "description": "Email (optionnel)"
            },
            "customer_phone": {
              "type": "string",
              "description": "Num√©ro de t√©l√©phone"
            },
            "number_of_guests": {
              "type": "number",
              "description": "Nombre de personnes"
            },
            "special_requests": {
              "type": "string",
              "description": "Demandes sp√©ciales (allergies, anniversaire, etc.)"
            }
          }
        },
        "description": "OBLIGATOIRE - Cr√©e la r√©servation. √Ä appeler UNIQUEMENT apr√®s check_availability positif."
      },
      {
        "name": "find_and_cancel_reservation",
        "async": false,
        "parameters": {
          "type": "object",
          "required": [
            "customer_name"
          ],
          "properties": {
            "customer_name": {
              "type": "string",
              "description": "Nom du client"
            },
            "customer_phone": {
              "type": "string",
              "description": "T√©l√©phone (optionnel, aide √† trouver)"
            }
          }
        },
        "description": "Recherche et annule une r√©servation par le nom du client."
      },
      {
        "name": "find_and_update_reservation",
        "async": false,
        "parameters": {
          "type": "object",
          "required": [
            "customer_name"
          ],
          "properties": {
            "new_date": {
              "type": "string",
              "description": "Nouvelle date YYYY-MM-DD (si changement)"
            },
            "new_time": {
              "type": "string",
              "description": "Nouvelle heure HH:mm (si changement)"
            },
            "customer_name": {
              "type": "string",
              "description": "Nom du client"
            },
            "new_number_of_guests": {
              "type": "number",
              "description": "Nouveau nombre de personnes (si changement)"
            }
          }
        },
        "description": "Recherche et modifie une r√©servation par le nom du client."
      }
    ],
    "maxTokens": 400,
    "temperature": 0.7
  },
  "firstMessage": "Bonjour ! Restaurant √©picurie, je vous √©coute.",
  "transcriber": {
    "model": "nova-2",
    "keywords": [
      "z√©ro:2",
      "un:2",
      "deux:2",
      "trois:2",
      "quatre:2",
      "cinq:2",
      "six:2",
      "sept:2",
      "huit:2",
      "neuf:2",
      "dix:2",
      "onze:2",
      "douze:2",
      "treize:2",
      "quatorze:2",
      "quinze:2",
      "seize:2",
      "vingt:2",
      "trente:2",
      "quarante:2",
      "cinquante:2",
      "soixante:2",
      "√©picurie",
      "r√©servation"
    ],
    "language": "fr",
    "provider": "deepgram",
    "endpointing": 500,
    "smartFormat": true
  },
  "serverMessages": [
    "conversation-update",
    "end-of-call-report",
    "function-call",
    "hang",
    "model-output",
    "phone-call-control",
    "speech-update",
    "status-update",
    "transcript",
    "tool-calls",
    "transfer-destination-request",
    "user-interrupted"
  ],
  "serverUrl": "https://uncontestablely-cushionless-linnea.ngrok-free.dev/api/webhooks/vapi",
  "metadata": {
    "restaurant_id": "fd796afe-61aa-42e3-b2f4-4438a258638b"
  },
  "backgroundSound": "office",
  "server": {
    "url": "https://uncontestablely-cushionless-linnea.ngrok-free.dev/api/webhooks/vapi",
    "timeoutSeconds": 20
  },
  "isServerUrlSecretSet": false
}